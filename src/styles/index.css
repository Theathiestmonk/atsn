@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --primary: #9E005C;
    --accent: #FF4D94;
    --support: #3F2B96;
    --background: #F6F6F6;
    --text: #2E2E2E;
  }
  
  body {
    font-family: 'Inter', system-ui, sans-serif;
    background-color: var(--background);
    color: var(--text);
  }
  
  /* Ensure onboarding pages have white background */
  .onboarding-page {
    background-color: white !important;
  }
}

@layer utilities {
  @keyframes loading-bar {
    0% { width: 0%; }
    50% { width: 70%; }
    100% { width: 100%; }
  }
}

@layer components {
  .btn-primary {
    @apply bg-gradient-to-r from-primary to-accent text-white font-medium px-6 py-3 rounded-lg hover:shadow-lg transition-all duration-200 transform hover:scale-105;
  }
  
  .btn-secondary {
    @apply bg-support text-white font-medium px-6 py-3 rounded-lg hover:bg-opacity-90 transition-all duration-200;
  }
  
  .card {
    @apply bg-white rounded-xl shadow-lg p-6 border border-gray-100;
  }
  
  .input-field {
    @apply w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200;
  }
  
  .gradient-bg {
    background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
  }
  
  .gradient-text {
    background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .line-clamp-4 {
    display: -webkit-box;
    -webkit-line-clamp: 4;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  /* Responsive navbar styles */
  .navbar-responsive {
    height: auto;
    min-height: 100vh;
    max-height: 100vh;
    overflow: hidden; /* Prevent scrollbars */
  }
  
  /* Streaming animation optimizations */
  .markdown-content {
    will-change: contents;
    contain: layout style paint;
  }
  
  .markdown-content.streaming {
    animation: none; /* Disable animations during streaming for better performance */
  }
  
  .markdown-content.streaming * {
    animation: none; /* Disable all child animations during streaming */
  }
  
  /* Optimize text rendering during streaming */
  .markdown-content p,
  .markdown-content li,
  .markdown-content h1,
  .markdown-content h2,
  .markdown-content h3 {
    will-change: contents;
    contain: layout style;
  }
  
  /* Smooth scrolling for chat */
  .custom-scrollbar {
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
  }
  
  /* Optimize bullet points during streaming */
  .markdown-content ul,
  .markdown-content ol {
    contain: layout style;
  }
  
  .markdown-content li {
    break-inside: avoid;
    page-break-inside: avoid;
  }
  
  @media (max-width: 768px) {
    .navbar-responsive {
      height: 100vh;
      overflow: hidden; /* No scrollbars on mobile */
    }
  }
  
  @media (max-width: 640px) {
    .navbar-responsive {
      height: 100vh;
    }
  }
  
  /* Enhanced markdown content styles for better bullet point handling */
  .markdown-content {
    @apply text-gray-900 leading-relaxed;
  }
  
  .markdown-content ul {
    @apply list-disc list-inside mb-4 space-y-2 pl-4;
  }
  
  .markdown-content ol {
    @apply list-decimal list-inside mb-4 space-y-2 pl-4;
  }
  
  .markdown-content li {
    @apply text-sm md:text-base mb-2 leading-relaxed;
    /* Ensure bullet points are properly aligned during streaming */
    display: list-item;
    list-style-position: inside;
  }
  
  .markdown-content li::marker {
    @apply text-pink-500 font-semibold;
  }
  
  /* Special handling for bullet points during streaming */
  .markdown-content ul li {
    position: relative;
    padding-left: 0.5rem;
  }
  
  .markdown-content ul li::before {
    content: "•";
    @apply text-pink-500 font-bold mr-2;
    position: absolute;
    left: -0.5rem;
  }
  
  /* Ensure proper spacing for nested lists */
  .markdown-content ul ul,
  .markdown-content ol ol {
    @apply mt-2 ml-4;
  }
  
  /* Enhanced paragraph spacing for better readability */
  .markdown-content p {
    @apply mb-3 last:mb-0 leading-relaxed;
  }
  
  /* Better heading spacing */
  .markdown-content h1,
  .markdown-content h2,
  .markdown-content h3 {
    @apply font-bold text-gray-900;
  }
  
  .markdown-content h1 {
    @apply text-lg md:text-xl mb-3 mt-4;
  }
  
  .markdown-content h2 {
    @apply text-base md:text-lg mb-2 mt-3;
  }
  
  .markdown-content h3 {
    @apply text-sm md:text-base mb-2 mt-2;
  }
  
  /* Enhanced code and blockquote styling */
  .markdown-content code {
    @apply bg-gray-200 px-1.5 py-0.5 rounded text-xs font-mono text-gray-800;
  }
  
  .markdown-content pre {
    @apply bg-gray-100 p-3 rounded-lg overflow-x-auto mb-3 text-xs font-mono border border-gray-200;
  }
  
  .markdown-content blockquote {
    @apply border-l-4 border-pink-500 pl-4 italic text-gray-600 mb-3 bg-gray-50 py-2 rounded-r-lg;
  }
  
  /* Streaming-specific styles for better bullet point appearance */
  .markdown-content.streaming ul li {
    @apply animate-pulse;
    transition: all 0.1s ease-in-out;
  }
  
  .markdown-content.streaming ul li:last-child {
    @apply animate-pulse;
  }
  
  /* Enhanced bullet point styling for better visibility */
  .markdown-content ul li {
    position: relative;
    padding-left: 1rem;
    margin-bottom: 0.5rem;
  }
  
  .markdown-content ul li::before {
    content: "•";
    @apply text-pink-500 font-bold;
    position: absolute;
    left: 0;
    top: 0;
    line-height: inherit;
  }
  
  /* Ensure proper spacing between list items */
  .markdown-content ul li + li {
    @apply mt-2;
  }
  
  /* Better handling for nested lists */
  .markdown-content ul ul {
    @apply mt-2 ml-6;
  }
  
  .markdown-content ul ul li {
    @apply text-sm;
  }
  
  /* Enhanced numbered list styling */
  .markdown-content ol li {
    @apply pl-1;
    counter-increment: list-counter;
  }
  
  .markdown-content ol li::marker {
    @apply text-pink-500 font-semibold;
    content: counter(list-counter) ".";
  }
  
  /* Ensure proper line breaks for bullet points during streaming */
  .markdown-content p + ul,
  .markdown-content p + ol {
    @apply mt-3;
  }
  
  .markdown-content ul + p,
  .markdown-content ol + p {
    @apply mt-3;
  }
  
  /* Special handling for incomplete lists during streaming */
  .markdown-content.streaming ul li:last-child {
    @apply border-l-2 border-pink-200 pl-3;
    background: linear-gradient(90deg, rgba(236, 72, 153, 0.05) 0%, transparent 100%);
  }
  
  .markdown-content.streaming ol li:last-child {
    @apply border-l-2 border-pink-200 pl-3;
    background: linear-gradient(90deg, rgba(236, 72, 153, 0.05) 0%, transparent 100%);
  }
  
  /* Prevent duplicate profile icons */
  .profile-icon-container {
    position: relative;
  }
  
  .session-indicator {
    position: absolute;
    top: -2px;
    right: -2px;
    z-index: 20;
  }
  
  /* Session indicator specific styles */
  .session-indicator .w-4 {
    width: 18px;
    height: 18px;
    border: 2px solid white;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  }
  
  /* Online status - green with pulse animation */
  .session-indicator .bg-green-500 {
    background: linear-gradient(135deg, #10b981, #059669);
    animation: pulse-green 2s infinite;
  }
  
  /* Offline status - red with subtle animation */
  .session-indicator .bg-red-500 {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    animation: pulse-red 2s infinite;
  }
  
  /* Checking status - yellow with pulse animation */
  .session-indicator .bg-yellow-500 {
    background: linear-gradient(135deg, #f59e0b, #d97706);
    animation: pulse-yellow 2s infinite;
  }
  
  /* Animation keyframes for session indicators */
  @keyframes pulse-green {
    0%, 100% { 
      transform: scale(1);
      box-shadow: 0 2px 8px rgba(16, 185, 129, 0.4);
    }
    50% { 
      transform: scale(1.1);
      box-shadow: 0 4px 12px rgba(16, 185, 129, 0.6);
    }
  }
  
  @keyframes pulse-red {
    0%, 100% { 
      transform: scale(1);
      box-shadow: 0 2px 8px rgba(239, 68, 68, 0.4);
    }
    50% { 
      transform: scale(1.1);
      box-shadow: 0 4px 12px rgba(239, 68, 68, 0.6);
    }
  }
  
  @keyframes pulse-yellow {
    0%, 100% { 
      transform: scale(1);
      box-shadow: 0 2px 8px rgba(245, 158, 11, 0.4);
    }
    50% { 
      transform: scale(1.1);
      box-shadow: 0 4px 12px rgba(245, 158, 11, 0.6);
    }
  }
  
  /* Ensure proper touch targets for mobile */
  @media (max-width: 768px) {
    .touch-target {
      min-height: 44px;
      min-width: 44px;
    }
    
    .session-indicator {
      top: -1px;
      right: -1px;
    }
    
    .session-indicator .w-4 {
      width: 16px;
      height: 16px;
    }
  }
  
  /* Auto-height adjustment for content */
  .content-auto-height {
    height: auto;
    min-height: 0;
    max-height: none;
    overflow: visible;
  }
  
  /* Responsive content sizing */
  .content-responsive {
    display: flex;
    flex-direction: column;
    height: 100%;
  }
  
  .content-responsive .content-main {
    flex: 1;
    overflow: visible;
    height: auto;
  }
  
  .content-responsive .content-footer {
    flex-shrink: 0;
  }
  
  /* Custom cursor styles for radio buttons */
  .radio-cell {
    cursor: pointer !important;
  }
  
  .radio-cell:hover {
    cursor: pointer !important;
  }
  
  .radio-cell:active {
    cursor: pointer !important;
  }
  
  /* Force cursor pointer on radio inputs */
  .radio-cell input[type="radio"] {
    cursor: pointer !important;
  }
  
  .radio-cell input[type="radio"]:hover {
    cursor: pointer !important;
  }
  
  .radio-cell input[type="radio"]:active {
    cursor: pointer !important;
  }
} 

  /* Force modal visibility on mobile */
  @media (max-width: 768px) {
    .modal-overlay {
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
      width: 100vw !important;
      height: 100vh !important;
      z-index: 99999 !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      overflow: hidden !important;
      padding: 0 !important;
    }
    
    .modal-content {
      position: relative !important;
      z-index: 100001 !important;
      margin: 1rem !important;
      max-width: calc(100vw - 2rem) !important;
      max-height: calc(100vh - 2rem) !important;
      transform: none !important;
      top: auto !important;
      left: auto !important;
    }
  }
  
  /* Extra small mobile devices */
  @media (max-width: 480px) {
    .modal-overlay {
      padding: 0 !important;
    }
    
    .modal-content {
      margin: 0.5rem !important;
      max-width: calc(100vw - 1rem) !important;
      max-height: calc(100vh - 1rem) !important;
    }
  }
  
  /* Landscape mobile orientation */
  @media (max-width: 768px) and (orientation: landscape) {
    .modal-content {
      max-height: calc(100vh - 1rem) !important;
      margin: 0.5rem !important;
    }
  }
  
  /* Additional mobile modal fixes */
  @media (max-width: 768px) {
    .modal-overlay * {
      box-sizing: border-box !important;
    }
    
    .modal-content {
      box-sizing: border-box !important;
      width: auto !important;
      height: auto !important;
    }
  } 